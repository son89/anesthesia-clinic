function drawChart(){var e=new google.visualization.LineChart(document.querySelector("#chart_div"));var t=new google.visualization.DataTable;t.addColumn("datetime","Timeline");t.addColumn("number","Blood Pressure");t.addColumn("number","Heart Beat");t.addColumn("string","direction");$("#save-blood-pressure-duration").click(function(){if(checkEventbloodrepat%2==0){var n=0;if($("#blood-pressure-start").val()==""){$("#save-blood-pressure-duration").attr("data-dismiss","");$("#blood-pressure-start-div").attr("class","form-group row has-error");$("#blood-pressure-start-error").attr("class","help-block")}else{n++;$("#blood-pressure-start-div").attr("class","form-group row");$("#blood-pressure-start-error").attr("class","help-block list-hide")}if($("#blood-pressure-end").val()==""){$("#save-blood-pressure-duration").attr("data-dismiss","");$("#blood-pressure-end-div").attr("class","form-group row has-error");$("#blood-pressure-end-error").attr("class","help-block")}else{$("#blood-pressure-end-div").attr("class","form-group row");$("#blood-pressure-end-error").attr("class","help-block list-hide");n++}if(n==2){$("#save-blood-pressure-duration").attr("data-dismiss","modal");systolic=$("#blood-pressure-start").val();diastolic=$("#blood-pressure-end").val();blood_time=$("#blood-pressure-time").val().split(":");$("<input>").attr({type:"hidden",name:"systolic",value:systolic}).appendTo("form");$("<input>").attr({type:"hidden",name:"diastolic",value:diastolic}).appendTo("form");$("<input>").attr({type:"hidden",name:"blood_pressure_time",value:blood_time}).appendTo("form");var r=startSurgerytime();if(r!=undefined){if(lastBloodtime[0]==-1){lastBloodtime[0]=r[0]}if(lastBloodtime[0]!=-1){if(lastBloodtime[0]>blood_time[0]){day_change=1}}lastBloodtime[0]=blood_time[0];t.addRows([[new Date(year,mon,day+day_change,parseInt(blood_time[0]),parseInt(blood_time[1]),0),parseInt(diastolic),null,"down"],[new Date(year,mon,day+day_change,parseInt(blood_time[0]),parseInt(blood_time[1]),0),parseInt(systolic),null,"up"],[null,null,null,null]]);var i=new google.visualization.DataView(t);i.setColumns([0,1,{type:"number",calc:function(e,t){return e.getValue(t,3)=="down"?e.getValue(t,1):null}},{type:"number",calc:function(e,t){return e.getValue(t,3)=="up"?e.getValue(t,1):null}},{type:"number",label:"Heart Beat",calc:function(e,t){return e.getValue(t,2)}}]);e.draw(i,{legend:{position:"bottom"},hAxis:{minValue:new Date(year,mon,day,r[0],0),maxValue:new Date(year,mon,day+1,r[0],0)},series:{0:{pointSize:0,color:"#3366cc"},1:{lineWidth:0,pointSize:15,pointShape:{type:"triangle",rotation:180},visibleInLegend:false,color:"#3366cc"},2:{lineWidth:0,pointSize:15,pointShape:{type:"triangle"},visibleInLegend:false,color:"#3366cc"},3:{pointSize:15,pointShape:{type:"star"}}}})}}}checkEventbloodrepat++});$("#choseـheart_beat").click(function(){if(checkEventheartrepat%2==0){if($("#heart_beat_time").val()==""||$("#heart_beat_number").val()==""||isNaN($("#heart_beat_number").val())){$("#heart_beat_valid").attr("class","help-block");$("#heart_beat_div").attr("class","form-group row has-error");$("#heart_beat_number_valid").attr("class","help-block");$("#choseـheart_beat").attr("data-dismiss","")}else{$("#choseـheart_beat").attr("data-dismiss","modal");var n=$("#heart_beat_number").val();var r=$("#heart_beat_time").val().split(":");$("<input>").attr({type:"hidden",name:"heartBeat",value:n}).appendTo("form");$("<input>").attr({type:"hidden",name:"heartTime",value:r}).appendTo("form");var i=startSurgerytime();if(i!=undefined){if(lastHearttime[0]==-1){lastHearttime[0]=i[0]}if(lastHearttime[0]!=-1){if(lastHearttime[0]>r[0]){day_change=1}}lastHearttime[0]=r[0];t.addRows([[new Date(year,mon,day+day_change,parseInt(r[0]),parseInt(r[1])),null,parseInt(n),"down"],[new Date(year,mon,day+day_change,parseInt(r[0]),parseInt(r[1])),null,parseInt(n),"up"],[null,null,null,null]]);var s=new google.visualization.DataView(t);s.setColumns([0,1,{type:"number",calc:function(e,t){return e.getValue(t,3)=="down"?e.getValue(t,1):null}},{type:"number",calc:function(e,t){return e.getValue(t,3)=="up"?e.getValue(t,1):null}},{type:"number",label:"Heart Beat",calc:function(e,t){return e.getValue(t,2)}}]);e.draw(s,{legend:{position:"bottom"},hAxis:{minValue:new Date(year,mon,day,i[0],i[1]),maxValue:new Date(year,mon,day+1,i[0],i[1])},series:{0:{pointSize:0,color:"#3366cc"},1:{lineWidth:0,pointSize:15,pointShape:{type:"triangle",rotation:180},visibleInLegend:false,color:"#3366cc"},2:{lineWidth:0,pointSize:15,pointShape:{type:"triangle"},visibleInLegend:false,color:"#3366cc"},3:{pointSize:15,label:"Heart Beat",pointShape:{type:"star"}}}})}}}checkEventheartrepat++})}google.load("visualization","1",{packages:["corechart"]});google.setOnLoadCallback(drawChart);var systolic;var diastolic;var blood_time;var day_change=0;var lastBloodtime=[-1];var lastHearttime=[-1];var time=new Date;var year=time.getFullYear();var mon=time.getMonth();var day=time.getDate();var checkEventbloodrepat=2;var checkEventheartrepat=2;google.load("visualization","1",{packages:["corechart"],callback:drawChart})